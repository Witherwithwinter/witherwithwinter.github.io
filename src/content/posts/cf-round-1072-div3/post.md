---
title: Codeforces Round 1072 (Div. 3)
published: 2026-01-15
description: "åº·å¤è®­ç»ƒ"
image: "./cover.webp"
tags: [Codeforces, Div.3]
category: Tutorial
draft: false
---

# â˜ï¸ä½“éªŒ

è¿‘ä¸€ä¸ªæœˆæ²¡æ€ä¹ˆåˆ·ç®—æ³•é¢˜äº†ï¼Œæœ‰äº›ç”Ÿç–ã€‚æ•´åœºä¸‹æ¥éš¾åº¦æ¯”å¹³æ—¶çš„ div.3 è¦é«˜ç‚¹ï¼Œæœ‰ç‚¹ div.2 - 2.5 çš„æ„Ÿè§‰ã€‚

ä¸€å¼€å§‹è¢« A å¡äº† 20 å¤šåˆ†é’Ÿï¼Œæ²¡ä»”ç»†è€ƒè™‘ n = 3 çš„æƒ…å†µï¼Œå–œæ 3 å‘ WAã€‚

B é¢˜çº¯æ€ç»´ï¼Œæ²¡ä»€ä¹ˆå¥½è¯´çš„ã€‚

C é¢˜å¾ˆæ°´ï¼ŒBFSæ¨¡æ‹Ÿä¸€ä¸‹å°±å¥½äº†ã€‚ç„¶è€Œæˆ‘æå‰è·³åˆ°åé¢å»çœ‹ G äº†ï¼Œå¯¼è‡´ C é¢˜ 1:40 æ‰è¿‡ã€‚

D é¢˜æ²¡è¯»æ˜ç™½ï¼Œè·³äº†ã€‚

E é¢˜å†™äº†ä¸ªæ»‘åŠ¨çª—å£ï¼Œå–œæ TLEã€‚

F é¢˜æ²¡çœ‹ã€‚

G é¢˜çº¿æ®µæ ‘ä¸ŠäºŒåˆ†ï¼Œé¢˜ç›®è¯»é”™äº†ä¸¤æ¬¡ã€‚å¯æƒœèµ›æ—¶æ²¡æ³¨æ„åˆ° ans åªå¯èƒ½æ˜¯ 0 æˆ– 1ï¼ŒTLE äº†ï¼Œæ²¡åšå‡ºæ¥ã€‚æ¯”èµ›ç»“æŸä¹‹åå¤šæƒ³äº†ä¸¤åˆ†é’Ÿï¼Œå‘ç°è¿™ä¸ªç»“è®ºä¹‹åå°± AC äº†ã€‚

æœ‰è¶£çš„æ˜¯ï¼Œè¿™æŠŠæˆ‘éƒ½åšå¥½æ‰å¤§åˆ†çš„å‡†å¤‡äº†ï¼Œç»“æœ Rating å˜åŒ–æ˜¯ 0ï¼Œå±…ç„¶æ²¡æ‰åˆ†ã€‚

# ğŸ’¡é¢˜è§£

## A - Social Experiment

### é¢˜æ„

ç»™ä½ ä¸€ä¸ªæ­£æ•´æ•° $n$ ï¼Œè¡¨ç¤ºæœ‰ $n$ ä¸ªäººã€‚

ä½ éœ€è¦æŠŠè¿™äº›äººåˆ†ç»„ï¼Œæ¯ç»„çš„äººæ•°å¿…é¡»æ˜¯ $2$ æˆ– $3$ã€‚æ¯ç»„å¯ä»¥é€‰æ‹©ä¸€ä¸ªç§ç±»ï¼Œç§ç±»åªæœ‰ $2$ ç§å¯ä¾›é€‰æ‹©ã€‚é—®ä¸¤ä¸ªç§ç±»çš„æ€»äººæ•°æœ€å°‘ç›¸å·®å¤šå°‘ã€‚

è¾“å‡ºä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºç­”æ¡ˆã€‚

### æ€è·¯

é¦–å…ˆï¼Œå½“ $n$ ä¸º $2$ æˆ– $3$ æ—¶ï¼Œåªèƒ½åˆ†ä¸€ç»„ï¼Œç­”æ¡ˆå°±æ˜¯ $n$ã€‚

æ¥ä¸‹æ¥è®¨è®º $n > 3$ çš„æƒ…å†µï¼š

 - å½“ $n$ ä¸ºå¶æ•°æ—¶ï¼Œå¯¹äºä¸¤ä¸ªç§ç±»ï¼Œæˆ‘ä»¬æ€»èƒ½åˆ†å‡ºä¸¤ä¸ª $\frac{n}{2}$ äººã€‚å¦‚æœ $\frac{n}{2}$ æ˜¯å¶æ•°ï¼Œé‚£å°±å…¨éƒ¨ä¸¤ä¸¤ä¸€ç»„ï¼›å¦åˆ™ï¼Œæœ€åä¸€ç»„å°±æ”¾ $3$ ä¸ªäººã€‚

    *è¿™ç§æƒ…å†µï¼Œä¸¤ä¸ªç§ç±»çš„æ€»äººæ•°ç›¸å·® $0$ã€‚*

- å½“ $n$ ä¸ºå¥‡æ•°æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆæ‹¿å‡º $5$ ä¸ªäººã€‚å‰©ä¸‹çš„éƒ¨åˆ†å°±æ˜¯å¶æ•°äº†ï¼ŒæŒ‰ç…§åˆšåˆšä¸Šé¢çš„æ–¹æ¡ˆåˆ†ç»„ã€‚è¿™æ—¶ä¸¤ä¸ªç§ç±»ï¼Œè¦ä¹ˆä¸€æ ·å¤šï¼Œè¦ä¹ˆå…¶ä¸­ä¸€ç§å¤š $2$ äººã€‚

    - å¦‚æœä¸€æ ·å¤šï¼Œå°±ä¸€ç§è¡¥ $2$ äººï¼Œ å¦ä¸€ç§è¡¥ $3$ äººï¼›
    - å¦‚æœå¤š $2$ äººï¼Œå°±å°‘çš„é‚£ç§è¡¥ $2$ äººï¼Œå¤šçš„é‚£ç§è¡¥ $3$ äººã€‚

    *è¿™ç§æƒ…å†µï¼Œä¸¤ä¸ªç§ç±»çš„æ€»äººæ•°æ€»æ˜¯ç›¸å·® $1$ã€‚*

é‚£ä¹ˆ $n > 3$ æ—¶ï¼Œç­”æ¡ˆå°±æ˜¯ $n \mod 2$ã€‚

### ä»£ç 

```cpp
void solve()
{
    int n; 
    cin >> n;

    if(n == 2 || n == 3) D(n);
    else D(n % 2);
}
```

## B - Hourglass

### é¢˜æ„

ç»™ä½  $3$ ä¸ªæ­£æ•´æ•° $s$ï¼Œ$k$ï¼Œ$m$ï¼Œåˆ†åˆ«è¡¨ç¤ºï¼š
- $s$ï¼šæ²™æ¼æ¼å®Œä¸€æ¬¡å¯ä»¥æ¼ $s$ åˆ†é’Ÿ
- $k$ï¼šæ¯ $k$ åˆ†é’Ÿç¿»è½¬ä¸€æ¬¡
- $m$ï¼šæ€»æ—¶é—´

ä½ éœ€è¦è®¡ç®—å‡ºæ²™æ¼åœ¨ $m$ åˆ†é’Ÿä¹‹åè¿˜å¯ä»¥æ¼å¤šå°‘åˆ†é’Ÿã€‚

è¾“å‡ºä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºç­”æ¡ˆã€‚

### æ€è·¯

å¦‚ä½•æ¨ç®—æœ€ç»ˆçŠ¶æ€å‘¢ï¼Ÿ

ä¸éš¾ç®—å‡ºï¼š
- æ²™æ¼çš„åè½¬æ¬¡æ•° 
  - $n = \frac{m}{k}$
- æœ€åä¸€æ¬¡ç¿»è½¬ä¹‹åï¼Œè·ç¦»ç»“æŸï¼Œè¿˜å‰©ä½™çš„æ—¶é—´ 
  - $d = m \mod k$

ç„¶åå†çœ‹ï¼Œæœ€åä¸€æ¬¡ç¿»è½¬ä¹‹åï¼Œæ²™æ¼ä¸Šæ–¹è¿˜æœ‰å¤šå°‘åˆ†é’Ÿï¼š
- å¦‚æœ $s > k$ ä¸” $n$ ä¸ºå¥‡æ•°ï¼Œé‚£ä¹ˆæ²™æ¼ä¸Šæ–¹è¿˜æœ‰ $k$ åˆ†é’Ÿï¼›
- å®¹æ˜“è¯æ˜ï¼Œé™¤æ­¤ä¹‹å¤–çš„æƒ…å†µï¼Œæ²™æ¼ä¸Šæ–¹æ€»æ˜¯è¿˜æœ‰ $s$ åˆ†é’Ÿã€‚

æ¥ä¸‹æ¥ï¼Œæ²™æ¼ä¸Šæ–¹è¿˜ä¼šå†æ¼ $d$ åˆ†é’Ÿã€‚

æˆ‘ä»¬å…¼å®¹æ²™å­ä¸å¤Ÿ $d$ åˆ†é’Ÿçš„æƒ…å†µï¼Œé‚£ä¹ˆæœ€ç»ˆç­”æ¡ˆå°±æ˜¯ï¼š

- $max(x - d, 0)$

### ä»£ç 

```cpp
void solve()
{
    int s, k, m; 
    cin >> s >> k >> m;

    int n = m / k, d = m % k;          
    int x = (s > k && (n % 2 == 1)) ? k : s;
    int ans = max(x - d, 0LL);

    D(ans);
}
```

## C - Huge Pile

### é¢˜æ„

ç»™ä½ ä¸¤ä¸ªæ­£æ•´æ•° $n$ å’Œ $k$ã€‚

æ¯æ¬¡å°† $n$ åˆ†æˆä¸¤éƒ¨åˆ†ï¼š

- å¦‚æœ $n$ æ˜¯å¶æ•°ï¼Œé‚£ä¹ˆåˆ†æˆä¸¤ä¸ª $\frac{n}{2}$ï¼›
- å¦‚æœ $n$ æ˜¯å¥‡æ•°ï¼Œé‚£ä¹ˆåˆ†æˆ $\frac{n + 1}{2}$ å’Œ $\frac{n - 1}{2}$ã€‚

åˆ†å‡ºçš„éƒ¨åˆ†å°†ä¼šä¸€ç›´é‡å¤è¿™ä¸ªè¿‡ç¨‹:

$1$ ä¸ªå˜ $2$ ä¸ªï¼Œ$2$ ä¸ªå˜ $4$ ä¸ªï¼Œ$4$ ä¸ªå˜ $8$ ä¸ª...

é—® $n$ æœ€å°‘è¦åˆ†å¤šå°‘æ¬¡ï¼Œæ‰å¯ä»¥åˆ†å‡º $k$ã€‚å¦‚æœä¸å¯èƒ½ï¼Œåˆ™è¾“å‡º $-1$ã€‚

### æ€è·¯

BFS æ¨¡æ‹Ÿä¸€ä¸‹å°±å¥½äº†ã€‚

æ³¨æ„å»é‡ï¼Œé˜²æ­¢ TLEã€‚

### ä»£ç 

```cpp
struct step
{
    int x, s;
};

void solve()
{
    int n, k; 
    cin >> n >> k;

    if(n < k) 
    {
        D(-1);
        return;
    }

    set<int> vis;
    queue<step> q;
    q.push({n, 0});

    while(!q.empty())
    {
        auto [x, s] = q.front();

        if(x == k)
        {
            D(s);
            return;
        }

        q.pop();
        if(vis.contains(x)) continue;
        vis.insert(x);

        int a = x / 2, r = x % 2;
        if(a >= k) q.push({a, s + 1});
        if(r) q.push({a + 1, s + 1});
    }

    D(-1);
}
```

## D - Unfair Game

å¾…æ›´æ–°

<!-- ### é¢˜æ„

### æ€è·¯

### ä»£ç 

```cpp
``` -->

## E - Exquisite Array

å¾…æ›´æ–°

<!-- ### é¢˜æ„

### æ€è·¯

### ä»£ç 

```cpp
``` -->

## F - Cherry Tree 

å¾…æ›´æ–°

<!-- ### é¢˜æ„

### æ€è·¯

### ä»£ç 

```cpp
``` -->

## G - Nastiness of Segments 

### é¢˜æ„

ç»™ä½ ä¸€ä¸ªé•¿åº¦ä¸º $n$ çš„æ­£æ•´æ•°æ•°ç»„ $a$ ä»¥åŠ $q$ æ¬¡æ“ä½œã€‚

æ¯æ¬¡æ“ä½œä»¥ä¸¤ç§å½¢å¼ç»™å‡ºï¼š

- $1$ $p$ $x$ï¼šå°†ç¬¬ $p$ ä¸ªå…ƒç´ çš„å€¼æ”¹ä¸º $x$

- $2$ $l$ $r$ï¼šè¯¢é—® $a_l, a_{l + 1}, \dots, a_r$ ä¸­æœ‰å¤šå°‘ä¸ªå…ƒç´ ï¼Œæ»¡è¶³ï¼š
  - $min(a_l,a_{l+1}, \dots,a_{l+d})=d$

**æ³¨æ„ï¼šæ“ä½œ $2$ çš„èŒƒå›´æ˜¯ $[l, r]$ï¼Œè€Œæ“ä½œ $2$ ä¸­ $min$çš„èŒƒå›´æ˜¯ $[l, l + d]$ã€‚**

æ“ä½œ $1$ çš„å½±å“æ˜¯æŒä¹…åŒ–çš„ã€‚

å¯¹äºæ¯æ¬¡æ“ä½œ $2$ï¼Œä½ éƒ½è¦è¾“å‡ºä¸€ä¸ªç­”æ¡ˆã€‚

### æ€è·¯

å¾ˆå®¹æ˜“æƒ³åˆ°ï¼Œä½¿ç”¨çº¿æ®µæ ‘æ¥è§£å†³å¸¦ä¿®æ”¹çš„$RMQ$ã€‚

ä½†æ˜¯ï¼Œå¦‚æœä»…ä»…åªç”¨çº¿æ®µæ ‘ï¼Œå¯¹äºæ¯æ¬¡è¯¢é—®ï¼Œæˆ‘ä»¬å®é™…ä¸Šè¿˜æ˜¯è¦æšä¸¾æ‰€æœ‰çš„å³ç«¯ç‚¹ï¼Œæ‰èƒ½ç¡®å®šç­”æ¡ˆã€‚

æ¯æ¬¡æŸ¥è¯¢ $O((r-l+1) \log n)$

æœ€å $2 \times 10 ^ 5$ æ¬¡æŸ¥è¯¢ Ã— $2 \times 10 ^ 5$ é•¿åº¦ â†’ $4 \times 10 ^ {10}$ æ¬¡æ“ä½œï¼Œå¿… TLEã€‚

éš¾é“åªèƒ½å†™ç¦»çº¿åšæ³•å¡è¿‡å»äº†å—ï¼Ÿ

é‚£å¤ªéº»çƒ¦äº†ã€‚

æ³¨æ„åˆ°ï¼Œå‰ç¼€ $min$ çš„å€¼æ€»æ˜¯å•è°ƒé€’å‡çš„ï¼Œè€Œ $d$ çš„å€¼æ˜¯å•è°ƒé€’å¢çš„ã€‚æ˜¾ç„¶ï¼Œæ¯æ¬¡è¯¢é—®åŒºé—´å†…ï¼Œåªæœ‰ $1$ ä¸ª $d$ æ˜¯åˆæ³•çš„ã€‚

æ¢å¥è¯è¯´ï¼š**ç­”æ¡ˆåªå¯èƒ½æ˜¯ $0$ æˆ– $1$**ã€‚

é‚£æˆ‘ä»¬ç›´æ¥äºŒåˆ†ç­”æ¡ˆï¼Œçœ‹åŒºé—´å†…çš„è¿™ä¸ª $d$ å­˜ä¸å­˜åœ¨ï¼Œä¸å°±è¡Œäº†å—ï¼Ÿ

### ä»£ç 

```cpp
void solve()
{
    int n, q;
    cin >> n >> q;

    vector<int> a(n);
    vcin(a);

    SegTree st(a);

    while (q--)
    {
        int op;
        cin >> op;

        if (op == 1)
        {
            int p, x;
            cin >> p >> x;

            st.update(p - 1, x);
        }
        else
        {
            int l, r, ans = 0;
            cin >> l >> r;

            l--, r--;

            if(l == r) 
            {
                D(0);
                continue;
            }

            int lo = 0, hi = r - l;
            while(lo <= hi) 
            {
                int mid = (lo + hi) >> 1;
                int mn = st.queryMin(l, l + mid);
                
                if(mn == mid) 
                {
                    ans = 1;
                    break;
                } 
                else if (mn > mid)  lo = mid + 1;
                else hi = mid - 1;
            }

            D(ans);
        }
    }
}
```

# ğŸˆæ¨¡æ¿

## çº¿æ®µæ ‘ - åŒºé—´æœ€å°å€¼æŸ¥è¯¢ - å•ç‚¹ä¿®æ”¹

```cpp
struct SegTree {
    int n;
    vector<int> mn;

    SegTree(const vector<int>& a) {
        n = a.size();
        mn.assign(n << 2, INF);
        build(a, 1, 0, n - 1);
    }

    void build(const vector<int>& a, int o, int l, int r) {
        if (l == r) { mn[o] = a[l]; return; }
        int mid = (l + r) >> 1;
        build(a, o << 1, l, mid);
        build(a, o << 1 | 1, mid + 1, r);
        mn[o] = min(mn[o << 1], mn[o << 1 | 1]);
    }

    void update(int pos, int v, int o, int l, int r) {
        if (l == r) { mn[o] = v; return; }
        int mid = (l + r) >> 1;
        if (pos <= mid) update(pos, v, o << 1, l, mid);
        else            update(pos, v, o << 1 | 1, mid + 1, r);
        mn[o] = min(mn[o << 1], mn[o << 1 | 1]);
    }

    int query(int L, int R, int o, int l, int r) {
        if (R < l || L > r) return INF;
        if (L <= l && r <= R) return mn[o];
        int mid = (l + r) >> 1;
        return min(query(L, R, o << 1, l, mid),
                   query(L, R, o << 1 | 1, mid + 1, r));
    }

public:
    void update(int pos, int v) { update(pos, v, 1, 0, n - 1); }
    int queryMin(int L, int R)  { return query(L, R, 1, 0, n - 1); }
};
```

## ç«è½¦å¤´

```cpp
#include <bits/stdc++.h>
#define inf INT_MAX
#define INF LLONG_MAX
#define MOD 1000000007
#define mod 998244353
#define all(_x) _x.begin(), _x.end()
#define vcin(_x) for(auto& _i : _x) cin >> _i
#define vvcin(_x) for(auto& _j : _x) for(auto& _i : _j) cin >> _i
#define D(_x) cout << _x << endl
#define vD(_x) for(int _i = 0; _i < _x.size(); ++_i) cout << _x[_i] << " \n"[_i == _x.size() - 1]
#define input(_n, _a) int _n; cin >> _n; vector<int> _a(_n); vcin(_a)
#define flr(_i, _l, _r) for(int _i = _l; _i <= _r; ++_i)
#define frl(_i, _r, _l) for(int _i = _r; _i >= _l; --_i)
#define YES cout << "YES" << endl
#define NO cout << "NO" << endl
#define Yes cout << "Yes" << endl
#define No cout << "No" << endl
#define yes cout << "yes" << endl
#define no cout << "no" << endl
using namespace std;

#define int long long
#define endl '\n' 

void solve()
{
    
}

signed main()
{
    ios::sync_with_stdio(false);
    cin.tie(nullptr);
    int _ = 1;
cin >> _;
    while (_--)
        solve();
    return 0;
}
```
